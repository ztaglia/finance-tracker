{% extends "base.html" %}
{% block content %}
<div class="container mt-4" style="max-width: 650px;">

    <!-- Back Button -->
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary mb-3">
        ← Back to Dashboard
    </a>

    <h2 class="mb-4">Manage Categories</h2>

    <!-- Add New Category -->
    <form action='{{ url_for('add_category') }}' method="POST" class="d-flex mb-4">
        <input type="text" class="form-control" name="new_category" placeholder="New category name">
        <button class="btn btn-primary ms-2">Add</button>
    </form>

    <!-- Category List -->
    <ul class="list-group">
        {% for c in categories %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <form method="POST" action="{{ url_for('edit_category', cat_id=c.id) }}" class="d-flex flex-grow-1">
                <input type="text" name="name" class="form-control" value="{{ c.name }}">
                <button class="btn btn-sm btn-success ms-2">Save</button>
            </form>

            <form method="POST" action="{{ url_for('delete_category', cat_id=c.id) }}">
                <button class="btn btn-sm btn-danger ms-2"
                        onclick="return confirm('Delete this category?');">
                    ✕
                </button>
            </form>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
